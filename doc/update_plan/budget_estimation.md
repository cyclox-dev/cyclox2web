# PHP・CodeIgniter4アップデート プロジェクト予算見積もり書

## 1. 見積もり概要

### プロジェクト基本情報
- **プロジェクト名**: PHP・CodeIgniter4アップデートプロジェクト
- **総開発工数**: 19.4人月
- **開発期間**: 工期束縛なし（仮工期として12ヶ月）
- **参加エンジニア数**: 4名
- **人月単価**: 30万円/人月
- **見積もり作成日**: 2025年6月20日

## 2. 総予算見積もり

| 項目 | 工数 | 単価 | 金額 | 比率 |
|------|------|------|------|------|
| **開発工数コスト** | **19.4人月** | **30万円** | **582万円** | **97.5%** |
| **フェーズ1: 要件定義とシステム構成設計** | **1.2人月** | **30万円** | **36万円** | **6.0%** |
| 　- 要件定義 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| 　- 現行システム分析 | 0.2人月 | 30万円 | 6万円 | 1.0% |
| 　- アーキテクチャ設計 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| 　- インフラストラクチャ計画 | 0.2人月 | 30万円 | 6万円 | 1.0% |
| **フェーズ2: 開発環境のコンテナ化** | **0.5人月** | **30万円** | **15万円** | **2.5%** |
| 　- Dockerコンテナ環境の構築 | 0.3人月 | 30万円 | 9万円 | 1.5% |
| 　- 開発ワークフロー整備 | 0.1人月 | 30万円 | 3万円 | 0.5% |
| 　- CI/CDパイプライン構築 | 0.1人月 | 30万円 | 3万円 | 0.5% |
| **フェーズ3: 現状評価と準備** | **0.8人月** | **30万円** | **24万円** | **4.0%** |
| 　- 詳細な依存関係の調査 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| 　- テスト環境の構築 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| **フェーズ4: 基盤構築** | **2.5人月** | **30万円** | **75万円** | **12.6%** |
| 　- CodeIgniter4の基本構造構築 | 0.5人月 | 30万円 | 15万円 | 2.5% |
| 　- データベース接続設定 | 0.3人月 | 30万円 | 9万円 | 1.5% |
| 　- 認証・認可システムの構築 | 0.5人月 | 30万円 | 15万円 | 2.5% |
| 　- 共通ユーティリティの移行 | 0.7人月 | 30万円 | 21万円 | 3.5% |
| 　- 実装パターンの確立と文書化 | 0.5人月 | 30万円 | 15万円 | 2.5% |
| **フェーズ5: 共通コンポーネント移行** | **2.2人月** | **30万円** | **66万円** | **11.1%** |
| 　- AppController/AppModelの移行 | 0.6人月 | 30万円 | 18万円 | 3.0% |
| 　- プラグイン機能の代替実装 | 1.0人月 | 30万円 | 30万円 | 5.0% |
| 　- 設定ファイルの移行 | 0.2人月 | 30万円 | 6万円 | 1.0% |
| 　- 共通ヘルパーとライブラリの移行 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| **フェーズ6: 機能グループごとの移行** | **10.0人月** | **30万円** | **300万円** | **50.3%** |
| 　- 基本UI機能 | 1.3人月 | 30万円 | 39万円 | 6.5% |
| 　- 選手管理機能 | 1.3人月 | 30万円 | 39万円 | 6.5% |
| 　- 大会管理機能 | 1.5人月 | 30万円 | 45万円 | 7.5% |
| 　- カテゴリー管理機能 | 1.3人月 | 30万円 | 39万円 | 6.5% |
| 　- ポイント管理機能 | 1.6人月 | 30万円 | 48万円 | 8.0% |
| 　- API機能 | 1.0人月 | 30万円 | 30万円 | 5.0% |
| 　- バッチ処理機能 | 0.8人月 | 30万円 | 24万円 | 4.0% |
| 　- ユーティリティ機能 | 0.7人月 | 30万円 | 21万円 | 3.5% |
| 　- ユーザー管理・権限管理機能 | 1.0人月 | 30万円 | 30万円 | 5.0% |
| **フェーズ7: テストと最終調整** | **1.5人月** | **30万円** | **45万円** | **7.5%** |
| 　- 総合テスト | 0.8人月 | 30万円 | 24万円 | 4.0% |
| 　- パフォーマンス最適化 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| 　- ドキュメント作成 | 0.3人月 | 30万円 | 9万円 | 1.5% |
| **フェーズ8: 本番環境への展開** | **0.7人月** | **30万円** | **21万円** | **3.5%** |
| 　- 本番環境のコンテナ化 | 0.4人月 | 30万円 | 12万円 | 2.0% |
| 　- 段階的デプロイ | 0.3人月 | 30万円 | 9万円 | 1.5% |
| **直接コスト** | | | **24.53万円** | **4.0%** |
| 　- GitHub Copilot（12ヶ月） | - | $10/月×4名 | 6.96万円 | 1.2% |
| 　- GitHub Organization（12ヶ月） | - | $4/月×4名 | 2.78万円 | 0.5% |
| 　- クラウド開発環境（12ヶ月） | - | $50/月 | 8.7万円 | 1.5% |
| 　- CI/CDパイプライン利用料（12ヶ月） | - | $35/月 | 6.09万円 | 1.0% |
| **総予算** | | | **606.53万円** | **100%** |

※ 為替レート: 1ドル=145円で計算

## 3. コスト削減要因

### AIエージェント活用による効率化
- **効率化率**: 25%
- **従来工数**: 約25.9人月相当
- **削減工数**: 約6.5人月
- **削減効果**: 約195万円の削減

### 段階的移行によるリスク軽減
- 大規模な一括移行と比較して約20%のリスク軽減
- 予期しない追加工数の発生確率を大幅に低減

### コンテナ化による環境構築効率化
- 開発・テスト・本番環境の一貫性確保
- 環境構築時間の約40%削減
- デプロイプロセスの自動化による工数削減

## 4. 注意事項・前提条件

### 見積もり前提条件
1. **工数**: tasks_estimation.csvに基づく詳細工数積算
2. **期間**: 工期束縛なし（仮工期として12ヶ月）での完了を想定
3. **人員**: 4名のエンジニアチームでの並行作業
4. **為替レート**: 1ドル=145円（2025年6月時点）

### 追加費用が発生する可能性がある項目
1. **要件変更**: 仕様変更による追加開発
2. **インフラ費用**: 本番環境のクラウド利用料
3. **第三者ライブラリ**: 有償ライブラリの導入が必要な場合
4. **セキュリティ監査**: 外部セキュリティ監査が必要な場合

### 費用に含まれないもの
- 本番環境のサーバー・クラウド利用料
- SSL証明書費用
- ドメイン費用
- 運用・保守費用（移行完了後）

## 5. ROI（投資対効果）分析

### セキュリティリスク回避効果
- **PHP 5.xサポート終了**: セキュリティ脆弱性による潜在的損失回避
- **推定回避効果**: 年間200-800万円相当

### 保守性向上効果
- **開発効率向上**: 新機能開発時間の30-40%短縮
- **バグ修正効率**: デバッグ時間の20-30%短縮
- **年間保守コスト削減**: 100-200万円相当

### パフォーマンス向上効果
- **応答速度向上**: 平均30-50%の高速化
- **サーバーリソース削減**: 約20-30%のリソース使用量削減
- **年間インフラコスト削減**: 20-40万円相当

### 総合的なROI
- **1年目**: 投資回収率 約50-70%
- **2年目**: 投資回収率 約100-150%（累計）
- **3年間累計**: 投資回収率 約200-300%

## 6. リスク管理計画

### 主要リスクと対策
1. **フレームワーク間の互換性問題**
   - **対策**: 詳細な機能マッピングと徹底したテスト
   - **コンティンジェンシー**: 0.5人月の予備工数を確保

2. **データモデルの複雑さ**
   - **対策**: データベース構造を変更せず、モデル層のみを適切に移行
   - **コンティンジェンシー**: モデル層テストの強化

3. **カスタム拡張の再実装**
   - **対策**: Cyclox/UtilなどのカスタムクラスをCodeIgniter4の設計パターンに適応
   - **コンティンジェンシー**: 共通コンポーネント移行フェーズでの徹底検証

4. **ダウンタイム**
   - **対策**: ブルー/グリーンデプロイメント戦略の採用
   - **コンティンジェンシー**: 迅速なロールバック計画の策定

## 7. プロジェクト管理アプローチ

### 開発手法
- **アジャイル開発**: 2週間スプリントでの反復開発
- **継続的インテグレーション**: 自動テストとデプロイパイプライン
- **段階的リリース**: 機能グループごとの検証とリリース

### 品質保証
- **自動テスト**: ユニットテスト、統合テスト、E2Eテスト
- **コードレビュー**: プルリクエストベースの相互レビュー
- **静的解析**: PHPStanなどによるコード品質チェック

### コミュニケーション計画
- **週次進捗報告**: プロジェクト状況の定期共有
- **技術文書**: 設計文書とコーディング規約の整備
- **ナレッジ共有**: 移行パターンのドキュメント化

## 8. まとめ

本プロジェクトは、PHP 5.xとCakePHP 2.xの古い技術スタックから、PHP 8.xとCodeIgniter4という最新の技術スタックへの移行を実現します。総予算606.53万円で、セキュリティ向上、保守性向上、パフォーマンス向上という3つの主要な効果が期待できます。

AIエージェントの活用により、従来より25%効率化された工数で開発を進めることが可能です。また、段階的な移行アプローチにより、リスクを最小限に抑えながら確実に移行を完了させることができます。

投資対効果（ROI）の観点からも、2年目には投資回収が完了し、3年間で投資額の2〜3倍のリターンが見込まれます。セキュリティリスクの回避、保守性の向上、パフォーマンスの改善という多面的な効果により、長期的な事業継続性と競争力の強化に貢献します。
